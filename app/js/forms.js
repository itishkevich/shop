;(function($) {	'use strict';	var customSelect = (function() {		var $select = $('.custom-select'),			$selectList = $('.custom-select__list'),			$selectControl = $('.custom-select__control'),			$itemHidden = $('.custom-select__control-required');		var init = function() {			_setUpListeners();		};		var _setUpListeners = function() {			$select.on('click touchstart', _showCustomSelect);			$('.custom-select__list-item').on('click touchstart', _changeSelectOption);			$(document).on('click touchstart', hideCustomSelect);		};		var _showCustomSelect = function() {			var $select = $(this),				$selectList = $select.find('.custom-select__list');			if ($select.hasClass('custom-select_active')) {				$select.removeClass('custom-select_active');				$selectList.not(':animated').slideUp();			} else {				$select.addClass('custom-select_active');				$selectList.not(':animated').slideDown();			}			return false;		};		var _changeSelectOption = function() {			var $item = $(this),				itemVal = $item.attr('data-value'),				$itemHidden = $item.parents('.custom-select').find('.custom-select__control-required'),				$itemParent = $item.parents('.custom-select').find('.custom-select__control');			$('.tooltip[data-name = "'+$itemHidden.attr('name')+'"]').remove();			$itemParent				.removeClass('error')				.addClass('custom-select__control_selected')				.text(itemVal);			$itemHidden.val(itemVal);		};		var hideCustomSelect = function() {			if ($select.hasClass('custom-select_active')) {				$select.removeClass('custom-select_active');				$selectList.not(':animated').slideUp();			}		};		var validateCustomSelect = function() {			var valid = true;			$.each($itemHidden, function(){				var $control = $(this),					$controlParent = $control.parents('.custom-select').find('.custom-select__control'),					controlVal = $control.val();				if (controlVal.length === 0) {					$controlParent.addClass('error');					if($control.attr('name') === 'day') {						$controlParent.tooltip({content: 'Укажите день', position: 'left'});					} else {						$controlParent.tooltip({content: 'Укажите месяц'});					}					valid = false;				}			});			return valid;		};		var cleanCustomSelect = function() {			$select.removeClass('custom-select_active');			$selectList.slideUp();			$selectControl.removeClass('custom-select__control_selected error');			$itemHidden.val('');			$.each($selectControl, function(){				var selectDefault = $(this).attr('data-default');				$(this).text(selectDefault);			});		};		return {			init: init,			clean: cleanCustomSelect,			hide: hideCustomSelect,			validate: validateCustomSelect		};	})();	var forms = (function() {		var init = function() {			_setUpListeners();			_iePlaceholder();		};		var _setUpListeners = function() {			var $form = $('form');			$form.on('reset', _formClear);			$form.on('submit', _formSubmit);			$form.on('keydown', '.required', _formHideError);		};		var _iePlaceholder = function() {			if(!('placeholder' in document.createElement('input'))){				$('[placeholder]').on('focus', function() {					var $input = $(this);					if ($input.val() === $input.attr('placeholder')) {						$input.val('');					}				}).on('blur', function() {					var $input = $(this);					if ($input.val() === '' || $input.val() === $input.attr('placeholder')) {						$input.val($input.attr('placeholder'))					}				}).blur().parents('form').submit(function() {					$(this).find('[placeholder]').each(function() {						var $input = $(this);						if ($input.val() === $input.attr('placeholder')) {							$input.val('');						}					})				});				setTimeout(function(){$('[placeholder]').trigger("blur");}, 100);			}		};		var _formSubmit = function(e) {			e.preventDefault ? e.preventDefault() : e.returnValue;			var $form = $(this),				$formTitle = $form.find('.form__title'),				formAction = $form.attr('action'),				$sbtBtn = $form.find('input[type="submit"]'),				$rstBtn = $form.find('input[type="reset"]'),				formValidated = _formValidation($form),				customValidated = customSelect.validate();			customSelect.hide();			$form.find('.message').remove();			if (formValidated === true && customValidated === true) {				$sbtBtn.add($rstBtn).attr('disabled', 'disabled');				$.ajax({					type: "POST",					url: formAction,					data: $form.serialize()				}).done(function(data) {					data = JSON.parse(data);					if(data.status == 'OK') {						_formClear();						$formTitle.after('<div class="message message_success">'+data.msg+'</div>');					} else {						$formTitle.after('<div class="message message_error">'+data.msg+'</div>');					}				}).always(function(){					$sbtBtn.add($rstBtn).removeAttr('disabled');				});			}		};		var _formValidation = function ($form) {			var $controlList = $form.find('.required'),				valid = true;			$.each($controlList, function(){				var $control = $(this),					controlVal = $control.val(),					placeholder = $control.attr('placeholder');				if (controlVal.length === 0 || controlVal === placeholder) {					$control.addClass('error');					if($control.attr('name') === 'name'){						$control.tooltip({content: 'Введите Имя'});					} else if($control.attr('name') === 'phone') {						$control.tooltip({content: 'Введите телефон'});					}					else {						$control.tooltip({content: 'Заполните Поле'});					}					valid = false;				}			});			_iePlaceholder();			return valid;		};		var _formHideError = function() {			$(this).removeClass('error');			$('.tooltip[data-name = "'+$(this).attr('name')+'"]').remove();		};		var _formClear = function() {			var $form = $('form');			$form.find('.message').remove();			$form.find('.required').val('').removeClass('error');			$form.find('.btn-container input').removeAttr('disabled');			$('.tooltip').remove();			customSelect.clean();			_iePlaceholder();		};		return {			init: init		};	})();	forms.init();	customSelect.init();	/* initialization scrollbar plugin */	$(window).on('load', function(){		$(".custom-select__list").mCustomScrollbar({			theme:"my-theme"		});	});})(jQuery);